syntax = "proto3";

package Protocol;
option csharp_namespace = "Google.Protobuf.Protocol";

enum MsgId {
  // °ÔÀÓ ¾À
  S_ENTER_GAME = 0;
  C_EXIT_GAME = 1;
  C_ENTER_ROOM = 100;
  S_ENTER_ROOM = 110;
  S_LEAVE_ROOM = 3;
  C_ENTER_POKEMON_LIST_SCENE = 40;
  S_ENTER_POKEMON_LIST_SCENE = 41;
  C_ENTER_POKEMON_BATTLE_SCENE = 42;
  S_ENTER_POKEMON_BATTLE_SCENE = 43;
  S_MEET_WILD_POKEMON = 150;
  S_GET_DOOR_DEST_DIR = 160;

  // Æ÷ÄÏ¸ó ±³È¯ ¾À
  C_ENTER_POKEMON_EXCHANGE_SCENE = 400;
  S_ENTER_POKEMON_EXCHANGE_SCENE = 410;
  C_MOVE_EXCHANGE_CURSOR = 420;
  S_MOVE_EXCHANGE_CURSOR = 430;
  C_CHOOSE_EXCHANGE_POKEMON = 440;
  S_CHOOSE_EXCHANGE_POKEMON = 450;
  C_FINAL_ANSWER_TO_EXCHANGE = 460;
  S_FINAL_ANSWER_TO_EXCHANGE = 470;
  C_EXIT_POKEMON_EXCHANGE_SCENE = 480;
  S_EXIT_POKEMON_EXCHANGE_SCENE = 490;

  S_SPAWN = 5;
  S_DESPAWN = 6;
  C_MOVE = 7;
  S_MOVE = 8;
  C_CREATE_PLAYER = 9;
  S_SEND_TALK = 15;
  S_RECEIVE_TALK = 16;
  C_SWITCH_POKEMON = 12;
  C_ACCESS_POKEMON_SUMMARY = 13;
  S_ACCESS_POKEMON_SUMMARY = 14;
  
  // °¡¹æ ¾À
  C_ENTER_PLAYER_BAG_SCENE = 200;
  S_ENTER_PLAYER_BAG_SCENE = 210;
  C_ITEM_SCENE_TO_BATTLE_SCENE = 220;
  S_ITEM_SCENE_TO_BATTLE_SCENE = 230;
  
  // ¹èÆ² ¾À
  C_REQUEST_DATA_BY_ID = 60;
  C_PROCESS_TURN = 310;
  S_PROCESS_TURN = 320;
  S_SWITCH_BATTLE_POKEMON = 31;
  S_GET_ENEMY_POKEMON_EXP = 61;
  S_CHECK_AND_APPLY_REMAINED_EXP = 62;
  S_CHECK_AVAILABLE_BATTLE_POKEMON = 350;
  C_IS_SUCCESS_POKE_BALL_CATCH = 380;
  S_IS_SUCCESS_POKE_BALL_CATCH = 390;
  S_ESCAPE_FROM_WILD_POKEMON = 63;
  S_CHECK_EXP_POKEMON = 340;
  S_CHECK_POKEMON_EVOLUTION = 330;
  C_RETURN_POKEMON_BATTLE_SCENE = 72;
  S_RETURN_POKEMON_BATTLE_SCENE = 73;
  
  C_RETURN_GAME = 4;

  C_PLAYER_TALK = 70;
  S_SEND_TALK_REQUEST = 71;

  // Æ÷ÄÏ¸ó ÁøÈ­ ¾À
  C_ENTER_POKEMON_EVOLUTION_SCENE = 500;
  S_ENTER_POKEMON_EVOLUTION_SCENE = 510;
  C_POKEMON_EVOLUTION = 520;
  S_POKEMON_EVOLUTION = 530;

  // ±â¼ú ¼±ÅÃ ¾À
  C_ENTER_MOVE_SELECTION_SCENE = 600;
  S_ENTER_MOVE_SELECTION_SCENE = 610;
  C_MOVE_SCENE_TO_BATTLE_SCENE = 620;
  S_MOVE_SCENE_TO_BATTLE_SCENE = 630;
  C_MOVE_SCENE_TO_EVOLVE_SCENE = 640;
  S_MOVE_SCENE_TO_EVOLVE_SCENE = 650;
}

enum CreatureState {
  IDLE = 0;
  CHANGE_DIR = 1;
  WALK = 2;
  RUN = 3;
  WATCH_MENU = 4;
  FIGHT = 5;
  TALK = 6;
  EXCHANGING = 7;
  POKEMON_EVOLVING = 8;
}

enum MoveDir {
  Up = 0;
  Down = 1;
  Left = 2;
  Right = 3;
}

enum GameObjectType {
  NONE = 0;
  PLAYER = 1;
  POKEMON = 2;
  PROJECTILE = 3;
}

enum RoomType {
    None = 0;
    Map = 1;
    PokemonCenter = 2;
}

message S_EnterGame {
}

message C_ExitGame {
	int32 objectId = 1;
}

message C_EnterRoom {
    int32 playerId = 1;
    int32 prevRoomId = 2;
    RoomType prevRoomType = 3;
}

message S_EnterRoom {
    PlayerInfo playerInfo = 1;
    int32 roomId = 2;
    RoomType roomType = 3;
}

message S_LeaveRoom {
}

message C_ReturnGame {
    int32 playerId = 1;
}

message S_Spawn {
    repeated PlayerInfo players = 1;
}

message S_Despawn {
    repeated int32 objectIds = 1;
}

message C_Move {
    PositionInfo posInfo = 1;
}

message S_Move {
    int32 objectId = 1;
    PositionInfo posInfo = 2;
}

message C_CreatePlayer {
    PlayerGender gender = 1;
    string name = 2;
}

message S_SendTalk
{
    PlayerInfo otherPlayerInfo = 1;
}

message S_ReceiveTalk
{
    PlayerInfo playerInfo = 1;
}

message C_SwitchPokemon {
    int32 ownerId = 1;
    int32 pokemonFromIdx = 2;
    int32 pokemonToIdx = 3;
}

message C_EnterPokemonListScene
{
    int32 playerId = 1;
}

message S_EnterPokemonListScene
{
    PlayerInfo playerInfo = 1;
    repeated PokemonSummary pokemonSums = 2;
}

message S_MeetWildPokemon
{
    int32 roomId = 1;
    int32 bushNum = 2;
}

message S_GetDoorDestDir
{
    MoveDir destDir = 1;
}

message C_AccessPokemonSummary
{
    int32 playerId = 1;
    int32 pokemonOrder = 2;
}

message S_AccessPokemonSummary
{
    PokemonSummary pokemonSum = 1;
}




// Æ÷ÄÏ¸ó ±³È¯ ¾À
message C_EnterPokemonExchangeScene
{
    int32 playerId = 1;
}

message S_EnterPokemonExchangeScene
{
    PlayerInfo playerInfo = 1;
    PlayerInfo otherPlayerInfo = 2;
    repeated PokemonSummary myPokemonSums = 3;
    repeated PokemonSummary otherPokemonSums = 4;
    ExchangeCursorPos myCursorPos = 5;
    ExchangeCursorPos otherCursorPos = 6;
    PokemonSummary otherPokemonSum = 7;
}

message C_ChooseExchangePokemon
{
    int32 playerId = 1;
    int32 pokemonOrder = 2;
}

message S_ChooseExchangePokemon
{
    PokemonSummary otherPokemonSum = 1;
}

message C_FinalAnswerToExchange
{
    int32 playerId = 1;
    bool finalAnswer = 2;
}

message S_FinalAnswerToExchange
{
    PokemonSummary myPokemonSum = 1;
    PokemonSummary otherPokemonSum = 2;
}

message C_MoveExchangeCursor
{
    int32 playerId = 1;
    int32 x = 2;
    int32 y = 3;
}

message S_MoveExchangeCursor
{
    int32 x = 1;
    int32 y = 2;
}

message C_ExitPokemonExchangeScene
{
    int32 playerId = 1;
}

message S_ExitPokemonExchangeScene
{
    PlayerInfo exitPlayerInfo = 1;
}


message C_PlayerTalk
{
    int32 playerId = 1;
    TalkRequestType talkRequestType = 2;
}

message S_SendTalkRequest
{
    TalkRequestType talkRequestType = 1;
}

enum TalkRequestType
{
    REQUEST_BATTLE = 0;
    REQUEST_EXCHANGE = 1;
    ACCEPT_BATTLE = 2;
    ACCEPT_EXCHANGE = 3;
    REJECT = 4;
    CANCEL_TALK = 5;
}




// °¡¹æ ¾À
message C_EnterPlayerBagScene
{
    int32 playerId = 1;
}

message S_EnterPlayerBagScene
{
    PlayerInfo playerInfo = 1;
    map<int32, CategoryInventory> inventory = 2;
}

message C_ItemSceneToBattleScene
{
    int32 playerId = 1;
    ItemCategory itemCategory = 2;
    int32 itemOrder = 3;
}

message S_ItemSceneToBattleScene
{
    PlayerInfo playerInfo = 1;
    PokemonSummary enemyPokemonSum = 2;
    PokemonSummary playerPokemonSum = 3;
    ItemSummary usedItem = 4;
}

message CategoryInventory
{
    repeated ItemSummary categoryItemSums = 1;
}




// ¹èÆ² ¾À
message C_EnterPokemonBattleScene
{
    int32 playerId = 1;
    int32 locationNum = 2;
    int32 bushNum = 3;
}

message S_EnterPokemonBattleScene
{
    PlayerInfo playerInfo = 1;
    PokemonSummary enemyPokemonSum = 2;
    repeated PokemonSummary playerPokemonSums = 3;
}

message C_RequestDataById
{
    int32 playerId = 1;
    RequestType requestType = 2;
}

enum RequestType
{
    CHECK_OBJECT_IN_MAP = 0;
    GET_ENEMY_POKEMON_EXP = 2;
    CHECK_AND_APPLY_REMAINED_EXP = 3;
    ESCAPE_FROM_WILD_POKEMON = 4;
    CHECK_EXP_POKEMON = 5;
    CHECK_AVAILABLE_BATTLE_POKEMON = 6;
    CHECK_POKEMON_EVOLUTION = 7;
}

message C_ProcessTurn
{
    int32 playerId = 1;
    int32 moveOrder = 2;
}

message S_ProcessTurn
{
    bool canUseMove = 1;
    bool isMyPokemon  = 2;
    int32 usedMoveOrder = 3;
    PokemonMoveSummary usedMoveSum = 4;
    PokemonSummary defensePokemonSum = 5;
    bool _isHit = 6;
    float typeEffectiveness = 7;
    bool isCriticalHit = 8;
    bool isTurnFinish = 9;
}

message S_GetEnemyPokemonExp
{
    PokemonSummary gotExpPokemonSum = 1;
    int32 exp = 2;
}

message S_CheckAndApplyRemainedExp
{
    int32 finalExp = 1;
    PokemonSummary expPokemonSum = 2;
    LevelUpStatusDiff statDiff = 3;
    PokemonMoveSummary newMoveSum = 4;
    bool isMainPokemon = 5;
}

message S_EscapeFromWildPokemon
{
    bool canEscape = 1;
}

message S_CheckExpPokemon
{
    bool isThereMoreExpPokemon = 1;
}

message S_CheckAvailableBattlePokemon
{
    bool canFight = 1;
}

message C_IsSuccessPokeBallCatch
{
    int32 playerId = 1;
}

message S_IsSuccessPokeBallCatch
{
    bool isCatch = 1;
    string _catchPokemonName = 2;
}

message S_CheckPokemonEvolution
{
    bool goToEvolutionScene = 1;
}

message S_SwitchBattlePokemon
{
    PlayerInfo playerInfo = 1;
    PokemonSummary enemyPokemonSum = 2;
    repeated PokemonSummary myPokemonSums = 3;
    PokemonSummary prevPokemonSum = 4;
}

message C_ReturnPokemonBattleScene
{
    int32 playerId = 1;
}

message S_ReturnPokemonBattleScene
{
    PlayerInfo playerInfo = 1;
    PokemonSummary enemyPokemonSum = 2;
    repeated PokemonSummary myPokemonSums = 3;
}




// Æ÷ÄÏ¸ó ÁøÈ­ ¾À
message C_EnterPokemonEvolutionScene
{
    int32 playerId = 1;
}

message S_EnterPokemonEvolutionScene
{
    PlayerInfo playerInfo = 1;
    PokemonSummary pokemonSum = 2;
    string evolvePokemonName = 3;
}

message C_PokemonEvolution
{
    int32 playerId = 1;
    bool isEvolution = 2;
}

message S_PokemonEvolution
{
    PokemonSummary evolvePokemonSum = 1;
    PokemonMoveSummary newMoveSum = 2;
}



// Æ÷ÄÏ¸ó ±â¼ú ¼±ÅÃ ¾À
message C_EnterMoveSelectionScene
{
    int32 playerId = 1;
}

message S_EnterMoveSelectionScene
{
    PlayerInfo playerInfo = 1;
    PokemonSummary pokemonSum = 2;
    PokemonMoveSummary learnableMoveSum = 3;
}

message C_MoveSceneToBattleScene
{
    int32 playerId = 1;
    int32 prevMoveIdx = 2;
}

message S_MoveSceneToBattleScene
{
    PlayerInfo playerInfo = 1;
    PokemonSummary myPokemonSum = 2;
    PokemonSummary enemyPokemonSum = 3;
    string movePokemonName = 4;
    string prevMoveName = 5;
    string newMoveName = 6;
}

message C_MoveSceneToEvolveScene
{
    int32 playerId = 1;
    int32 prevMoveIdx = 2;
}

message S_MoveSceneToEvolveScene
{
    PlayerInfo playerInfo = 1;
    PokemonSummary pokemonSum = 2;
    string prevMoveName = 3;
    string newMoveName = 4;
}




message ObjectInfo {
  int32 objectId = 1;
  PositionInfo posInfo = 2;
}

message PlayerInfo {
    ObjectInfo objectInfo = 1;
    string playerName = 2;
    PlayerGender playerGender = 3;
}

message PositionInfo {
	CreatureState state = 1;
	MoveDir moveDir = 2;
	int32 posX = 3;
	int32 posY = 4;
}

message ExchangeCursorPos
{
    int32 x = 1;
    int32 y = 2;
}

message PokemonSummary
{
    PokemonInfo pokemonInfo = 1;
    PokemonStat pokemonStat = 2;
    PokemonExpInfo pokemonExpInfo = 3;
    repeated PokemonMoveSummary pokemonMoves = 4;
    PokemonMoveSummary noPPMove = 5;
}

message PokemonInfo
{
    int32 dictionaryNum = 1;
    string nickName = 2;
    string pokemonName = 3;
    // Item ball;
    int32 level = 4;
    PokemonGender gender = 5;

    string ownerName = 6;
    int32 ownerId = 7;
    PokemonType type1 = 8;
    PokemonType type2 = 9;
    PokemonStatusCondition pokemonStatus = 10;

    // Ability ability;

    PokemonNature nature = 11;
    int32 metLevel = 12;
    // string metMapName;
}

message PokemonStat {
	int32 hp = 1;
	int32 maxHp = 2;
	int32 attack = 3;
	int32 defense = 4;
	int32 specialAttack = 5;
	int32 specialDefense = 6;
	int32 speed = 7;
}

message PokemonExpInfo {
    int32 curExp = 1;
    int32 totalExp = 2;
    int32 remainExpToNextLevel = 3;
}

message PokemonMoveSummary
{
    string moveName = 1;
    int32 movePower = 2;
    int32 moveAccuracy = 3;
    float criticalRate = 4;
    int32 curPP = 5;
    int32 maxPP = 6;
    MoveCategory moveCategory = 7;
    PokemonType moveType = 8;
    string moveDescription = 9;
}

message ItemSummary
{
    ItemCategory itemCategory = 1;
    string itemName = 2;
    string itemDescription = 3;
    int32 itemCnt = 4;
}

message LevelUpStatusDiff
{
    int32 MaxHP = 1;
    int32 Attack = 2;
    int32 Defense = 3;
    int32 SpecialAttack = 4;
    int32 SpecialDefense = 5;
    int32 Speed = 6;
}

enum PlayerGender
{
    PLAYER_MALE = 0;
    PLAYER_FEMALE = 1;
}

enum PokemonGender
{
    MALE = 0;
    FEMALE = 1;
    NEUTRAL = 2;
}

enum PokemonType
{
    NORMAL = 0;
    FIRE = 1;
    WATER = 2;
    ELECTR = 3;
    GRASS = 4;
    FLYING = 5;
    POISON = 6;
    TYPE_NONE = 99;
}

enum PokemonNature
{
    HARDY = 0;
    ADAMANT = 2;
    BOLD = 5;
    DOCILE = 6;
    IMPISH = 7;
    MODEST = 10;
    BASHFUL = 12;
    CALM = 15;
    CAREFUL = 17;
    QUIRKY = 18;
    TIMID = 20;
    JOLLY = 22;
    SERIOUS = 24;
}

enum PokemonStatusCondition
{
    STATUS_NONE = 0;
    FAINTING = 1;
}

enum MoveCategory
{
    PHYSICAL = 0;
    SPECIAL = 1;
    OTHER = 2;
}

enum ItemCategory
{
    ITEM = 0;
    POKE_BALL = 1;
    TECHNICAL_MACHINE = 2;
    BERRY = 3;
    KEY_ITEM = 4;
}